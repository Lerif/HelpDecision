<!DOCTYPE xhtml
    [<!ENTITY times "&#215;"  >]
    >
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!--CSS -->
	<link rel="stylesheet" href="../css/themes/default.min.css" />
	<link rel="stylesheet" href="../css/nprogress.css" type="text/css" />
	<link rel="stylesheet" href="../css/custom.css" type="text/css" />
	<link rel="stylesheet" href="../css/bootstrap/bootstrap-theme.css"
		type="text/css" media="all" />
	<link rel="stylesheet" href="../css/bootstrap/bootstrap.css"
		type="text/css" media="all" />
	<link rel="script" href="../css/bootstrap/bootstrap-theme.css"
		type="text/css" media="all" />
	<link rel="stylesheet" href="../css/alertify/alertify.css" />

	<!-- JS -->
	<h:outputScript
		src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" />
	<h:outputScript src="http://getbootstrap.com/dist/js/bootstrap.min.js" />
	<h:outputScript src="../dist/js/nprogress.js" />
	<h:outputScript src="../dist/js/alertify/alertify.js" />


	<title>Home | Help Decision</title>
</h:head>



<h:body>
	<nav class="navbar navbar-default">
		<div class="container-fluid">

			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
					aria-expanded="false">
					<span class="sr-only">Barra de Navegação</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
			</div>

			<div class="collapse navbar-collapse"
				id="bs-example-navbar-collapse-1">
				<p class="navbar-text">Help Decision</p>
				<ul class="nav navbar-nav navbar-right">
					<li data-toggle="modal" data-target="#modal_sobre"><a href="#">Sobre</a></li>
					<li>
						<div class="col-lg-6 col-sm-6 col-3 btn btn-md">
							<a href="upload.xhtml"> <h:commandButton
									class="btn btn-warning pull-left btn-md m-t-md" value="Upload" /></a>
						</div>
					</li>
				</ul>
			</div>

		</div>
	</nav>

	<h3 class="text-primary text-center">Dashboard</h3>
	<div class="container" style="text-align: center">
		<div class="login-box well">
			<h:form id="formLogin" class="form-inline">

				<div class="form-group">
					<h:selectOneMenu value="#{homeBean.servidorSelecionado}"
						class="btn btn-default">
						<f:selectItem itemLabel="Selecione um Servidor" />
						<f:selectItems value="#{homeBean.comboServidores}" />
					</h:selectOneMenu>
				</div>

				<div class="form-group">

					<label>Data Início e Fim:</label> <label>Data Início e Fim:</label>
					<input id="datas" type="text" name="daterange"
						value="01/01/2016 1:30 PM - 01/01/2016 2:00 PM" />
				</div>

				<div class="form-group">
					<label>Range(ms):</label>
					<h:inputText value="#{homeBean.rangeInicio}" class="form-control"
						rows="1" cols="8" id="min" title=" Min"></h:inputText>
				</div>

				<div class="form-group">
					<h5>&lt;-&gt;</h5>
				</div>

				<div class="form-group">
					<h:inputText value="#{homeBean.rangeFim}" class="form-control"
						rows="1" cols="8" id="max" title="Max"></h:inputText>
				</div>

				<div class="form-group">

					<h:commandButton type="submit"
						class="btn btn-success btn-login-submit btn-md" value="Filtrar"
						action="#{homeBean.filtrar()}" />
				</div>

			</h:form>
		</div>
	</div>
	<div class="container">
		<div class="row">


			<div class="col-md-12">
				<div class="table-responsive">
					<h:form id="form_dash_datatable">

						<p:dialog header="Modal Dialog" widgetVar="dlg2" modal="true"
							height="100">
							<h:outputText value="This is a Modal Dialog." />
						</p:dialog>

						<p:dataTable class="table table-bordred table-striped"
							id="chamadaMetodo" value="#{homeBean.gerarLogDashboardInicial}"
							var="log">

							<p:column sortBy="#{log.nomeMetodo}" headerText="Nome">
								<p:commandLink oncomplete="PF('rowDetailDialog').show();"
									action="#{homeBean.showRowDetails}">
									<f:setPropertyActionListener value="#{log}" target="#{homeBean.selectedRow}" />
									<h:outputText value="#{log.nomeMetodo}" />
								</p:commandLink>
							</p:column>

							<p:column sortBy="#{log.quantidadeDessaChamada}"
								headerText="Quantidade de Chamadas">
								<div align="center">
									<h:outputText value="#{log.quantidadeDessaChamada}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.porcentagemTotal}"
								headerText="% De Quantidade de Chamadas">
								<div align="center">
									<h:outputText value="#{log.porcentagemTotal}">
										<f:convertNumber pattern="#0.00" />
									</h:outputText>
								</div>
							</p:column>

							<p:column sortBy="#{log.tempoTotal}" headerText="Tempo Total">
								<div align="center">
									<h:outputText value="#{log.tempoTotal}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.tempoMedio}" headerText="Tempo Medio">
								<div align="center">
									<h:outputText value="#{log.tempoMedio}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.tempoMaior}" headerText="Maior Tempo">
								<div align="center">
									<h:outputText value="#{log.tempoMaior}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.tempoMenor}" headerText="Menor Tempo">
								<div align="center">
									<h:outputText value="#{log.tempoMenor}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.nomeServidor}" headerText="Servidor">
								<div align="center">
									<h:outputText value="#{log.nomeServidor}" />
								</div>
							</p:column>
						</p:dataTable>
						
						<p:dialog header="Metodo Detail" widgetVar="rowDetailDialog" modal="true"
							showEffect="fade" hideEffect="fade" resizable="false">
							<p:outputPanel id="rowDetail" style="text-align:center;">
								<h:outputText value="Teste" />
							</p:outputPanel>
						</p:dialog>
					</h:form>
				</div>
			</div>
		</div>
	</div>
</h:body>

<p:dialog id="myDialog" widgetVar="refaccionDialog"
	header="Detalle Refaccion" resizable="false" width="300"
	showEffect="explode" hideEffect="explode">
	<h:panelGrid id="display" columns="2" cellpadding="4">
		<h:outputText value="Info:" />
		<!-- <h:outputText value="#{consultasBean.refaccionSeleccionada.equipo}" />  -->
	</h:panelGrid>
     //More things here...
 </p:dialog>

<!-- Modal Sobre-->
<div class="modal fade" id="modal_sobre" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<h4 class="modal-title" id="modalSobre">Help Decision</h4>
			</div>
			<div class="modal-body">
				<b>Desenvolvido por:</b><br></br> Jovens Profissionais "Doberman"<br></br>
				<br></br> <b>Equipe:</b><br></br> Gabriel Rado<br></br> Guilherme
				Bury<br></br> Gustavo Daneluti<br></br> Thales Rocha<br></br> Thiago
				Osiro
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
			</div>
		</div>
	</div>
</div>

<script>
	function getData() {
		alert(document.getElementById("datas").value);

	}

	$(function() {
		$('input[name="daterange"]').daterangepicker({
			timePicker : true,
			timePicker24Hour : true,
			timePickerSeconds : true,
			locale : {
				format : 'DD/MM/YYYY hh:mm:ss'
			}
		});
	});

	function teste1() {
		alert(document.getElementById("min").value);
	}

	function alertServidorNaoSelecionado() {
		alertify.notify('Favor selecionar um servidor', 'error', 3, function() {
			console.log('dismissed');
		});
	}

	function alertLetras() {
		var str = document.getElementById("min").value;
		var res = /[^0-9]/.test(str);
		var delay = 200;
		if (res) {
			alertify.notify('Favor utilizar apenas numeros no range', 'error',
					5, function() {
						console.log('dismissed');
					});

		} else {
			alertify.notify('Ok', 'success', 5, function() {
				console.log('dismissed');
			});
		}
	}
</script>
</html>