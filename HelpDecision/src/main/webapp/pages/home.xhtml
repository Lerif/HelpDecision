<!DOCTYPE xhtml
    [<!ENTITY times "&#215;"  >]
    >
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />


	<!--BOOTSTRAP -->
	<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"></link>
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

	<!--JQUERY-->
	<script
		src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

	<!--DATETIMEPICKER-->
	<!-- Include Required Prerequisites -->
	<script type="text/javascript"
		src="//cdn.jsdelivr.net/jquery/1/jquery.min.js"></script>
	<script type="text/javascript"
		src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
	<link rel="stylesheet" type="text/css"
		href="//cdn.jsdelivr.net/bootstrap/3/css/bootstrap.css" />
	<!-- Include Date Range Picker -->
	<script type="text/javascript"
		src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
	<link rel="stylesheet" type="text/css"
		href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />


	<!--ALERTFY-->
	<script src="../dist/js/alertify/alertify.js"></script>
	<link rel="stylesheet" href="../css/alertify/alertify.css" />

	<title>Home | Help Decision</title>
</h:head>



<h:body>
	<nav class="navbar navbar-default">
		<div class="container-fluid">

			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
					aria-expanded="false">
					<span class="sr-only">Barra de Navegação</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
			</div>

			<div class="collapse navbar-collapse"
				id="bs-example-navbar-collapse-1">
				<p class="navbar-text">Help Decision</p>
				<ul class="nav navbar-nav navbar-right">
					<li data-toggle="modal" data-target="#modal_sobre"><a href="#">Sobre</a></li>
					<li>
						<div class="col-lg-6 col-sm-6 col-3 btn btn-md">
							<a href="upload.xhtml"> <h:commandButton
									class="btn btn-warning pull-left btn-md m-t-md" value="Upload" /></a>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<h3 class="text-primary text-center">Dashboard</h3>
	<div class="container" style="text-align: center">
		<div class="login-box well">
			<h:form id="formLogin" class="form-inline">

				<div class="form-group">
					<h:selectOneMenu value="#{homeBean.servidorSelecionado}"
						class="btn btn-default">
						<f:selectItem itemLabel="Selecione um Servidor" />
						<f:selectItems value="#{homeBean.comboServidores}" />
					</h:selectOneMenu>
				</div>

				<div class="form-group">
				</div>

				<div class="form-group">
						Data Inicio
						<h:inputText id="dataI" value="#{homeBean.dataInicio}"
							required="true" label="Data Inicio">
							<f:convertDateTime pattern="yyyy/MM/dd HH:mm:ss" />
						</h:inputText>
						<h:message for="dataI" style="color:red" />
				</div>

				<div class="form-group">
					Data fim
					<h:inputText id="dataF" value="#{homeBean.dataFim}" size="20"
						required="true" label="Data fim" >
						<f:convertDateTime pattern="yyyy/MM/dd HH:mm:ss" />
					</h:inputText>
					<h:message for="dataF" style="color:red" />
				</div>
				<br />
				<div class="form-group">
					<label>Range(ms):</label>
					<h:inputText value="#{homeBean.rangeInicio}" class="form-control"
						rows="1" cols="8" id="min" title=" Min"></h:inputText>
				</div>

				<div class="form-group">
					<h5>&lt;-&gt;</h5>
				</div>

				<div class="form-group">
					<h:inputText value="#{homeBean.rangeFim}" class="form-control"
						rows="1" cols="8" id="max" title="Max"></h:inputText>
				</div>

				<div class="form-group">

					<h:commandButton type="submit"
						class="btn btn-success btn-login-submit btn-md" value="Filtrar"
						action="#{homeBean.filtrar()}" />
				</div>

			</h:form>
		</div>
	</div>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="table-responsive">
					<h:form>
						<p:dataTable class="table table-bordred table-striped"
							id="chamadaMetodo" value="#{homeBean.gerarLogDashboardInicial}"
							var="log">
							<p:column sortBy="#{log.nomeMetodo}">
								<f:facet name="header">
									<h:outputText value="Nome" />
								</f:facet>
								<h:outputText value="#{log.nomeMetodo}" />
							</p:column>

							<p:column sortBy="#{log.quantidadeDessaChamada}">
								<f:facet name="header">
									<h:outputText value="Quantidade de Chamadas" />
								</f:facet>
								<div align="center">
									<h:outputText value="#{log.quantidadeDessaChamada}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.porcentagemTotal}">
								<f:facet name="header">
									<h:outputText value="% De Quantidade de Chamadas" />
								</f:facet>
								<div align="center">
									<h:outputText value="#{log.porcentagemTotal}">
										<f:convertNumber pattern="#0.00" />
									</h:outputText>
								</div>
							</p:column>

							<p:column sortBy="#{log.tempoTotal}">
								<f:facet name="header">
									<h:outputText value="Tempo Total" />
								</f:facet>
								<div align="center">
									<h:outputText value="#{log.tempoTotal}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.tempoMedio}">
								<f:facet name="header">
									<h:outputText value="Tempo Medio" />
								</f:facet>
								<div align="center">
									<h:outputText value="#{log.tempoMedio}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.tempoMaior}">
								<f:facet name="header">
									<h:outputText value="Maior Tempo" />
								</f:facet>
								<div align="center">
									<h:outputText value="#{log.tempoMaior}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.tempoMenor}">
								<f:facet name="header">
									<h:outputText value="Menor Tempo" />
								</f:facet>
								<div align="center">
									<h:outputText value="#{log.tempoMenor}" />
								</div>
							</p:column>

							<p:column sortBy="#{log.nomeServidor}">
								<f:facet name="header">
									<h:outputText value="Servidor" />
								</f:facet>
								<div align="center">
									<h:outputText value="#{log.nomeServidor}" />
								</div>
							</p:column>
						</p:dataTable>
					</h:form>
				</div>
			</div>
		</div>
	</div>
</h:body>


<!-- Modal Sobre-->
<div class="modal fade" id="modal_sobre" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<h4 class="modal-title" id="modalSobre">Help Decision</h4>
			</div>
			<div class="modal-body">
				<b>Desenvolvido por:</b><br></br> Jovens Profissionais "Doberman"<br></br>
				<br></br> <b>Equipe:</b><br></br> Gabriel Rado<br></br> Guilherme
				Bury<br></br> Gustavo Daneluti<br></br> Thales Rocha<br></br> Thiago
				Osiro
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
			</div>
		</div>
	</div>
</div>

<script>

	function getData(){
		alert(document.getElementById("datas").value);

		}
	
	$(function() {
		$('input[name="daterange"]').daterangepicker({
			timePicker : true,
			timePicker24Hour : true,
			timePickerSeconds : true,
			locale : {
				format : 'DD/MM/YYYY hh:mm:ss'
			}
		});
	});

	function teste1() {
		alert(document.getElementById("min").value);
	}
	
	function alertServidorNaoSelecionado(){
		alertify.notify('Por favor selecionar um servidor', 'error', 3, function(){  console.log('dismissed'); });
	}
	
	function alertDataFormatoInvalido(){
		alertify.notify('Por favor inserir data no formato yyyy/MM/dd HH:mm:ss\n(Ex: 2016/11/15 16:11:25', 'error', 7, function(){  console.log('dismissed'); });
	}

	function alertLetras() {
		var str = document.getElementById("min").value;
		var res = /[^0-9]/.test(str);
		var delay = 200;
		if (res) {
        	alertify.notify('Favor utilizar apenas numeros no range', 'error', 5, function(){  console.log('dismissed'); });
			
    	} else {
	        alertify.notify('Ok', 'success', 5, function(){  console.log('dismissed'); });
	    }
	}
</script>
</html>